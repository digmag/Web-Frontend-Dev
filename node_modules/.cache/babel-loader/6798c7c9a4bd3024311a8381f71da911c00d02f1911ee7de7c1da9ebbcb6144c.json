{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ksenia\\\\Desktop\\\\Web-Frontend-Dev26\\\\src\\\\components\\\\applications\\\\comp\\\\applChain.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport '../applications.css';\nimport Container from 'react-bootstrap/Container';\nimport ApplItem from \"./applItem\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ApplChain = () => {\n  _s();\n  const [newData, setNewData] = useState([]);\n  useEffect(() => {\n    handleSubmit();\n  }, []);\n  const fetchOfficeData = async () => {\n    const idd = localStorage.getItem('idd');\n    try {\n      const response = await fetch(`http://158.160.147.51:8181/api/office/${idd}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + localStorage.getItem('token')\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch office data');\n      }\n      return await response.json();\n    } catch (error) {\n      console.log(error.message);\n      return null;\n    }\n  };\n  const fetchRequestData = async () => {\n    try {\n      const idd = localStorage.getItem('idd');\n      const response = await fetch(`http://158.160.147.51:8181/api/office/${idd}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + localStorage.getItem('token')\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch request data');\n      }\n      return await response.json();\n    } catch (error) {\n      console.log(error.message);\n      return null;\n    }\n  };\n  const handleSubmit = async () => {\n    try {\n      const officeData = await fetchOfficeData();\n      const requestData = await fetchRequestData();\n      if (!officeData || !requestData) {\n        throw new Error('Failed to fetch required data');\n      }\n      const newData = requestData.requests.map(item => ({\n        status: item.status,\n        keyId: item.keyId,\n        requestedDateTime: item.requestedDateTime,\n        id: item.id,\n        backgroundColor: getStatusBackgroundColor(item.status)\n      }));\n      console.log('New data:', newData);\n      setNewData(newData);\n    } catch (error) {\n      console.log('Ошибка:', error);\n    }\n  };\n  const getStatusBackgroundColor = status => {\n    switch (status) {\n      case 'отклонено':\n        return '#DC5858';\n      case 'IN_PROCESS':\n        return '#EECF2A';\n      case 'одобрено':\n        return '#1EC360';\n      default:\n        return '#ffffff';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"applChain\",\n    children: newData.map((data, index) => /*#__PURE__*/_jsxDEV(ApplItem, {\n      background: data.backgroundColor,\n      status: data.status,\n      keyId: data.keyId,\n      id: data.id,\n      requestedDateTime: data.requestedDateTime\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n_s(ApplChain, \"/0Ws/TMOaL/Rghr7m3KvhNzLL5g=\");\n_c = ApplChain;\nexport default ApplChain;\nvar _c;\n$RefreshReg$(_c, \"ApplChain\");","map":{"version":3,"names":["React","useState","useEffect","Container","ApplItem","jsxDEV","_jsxDEV","ApplChain","_s","newData","setNewData","handleSubmit","fetchOfficeData","idd","localStorage","getItem","response","fetch","method","headers","ok","Error","json","error","console","log","message","fetchRequestData","officeData","requestData","requests","map","item","status","keyId","requestedDateTime","id","backgroundColor","getStatusBackgroundColor","className","children","data","index","background","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Ksenia/Desktop/Web-Frontend-Dev26/src/components/applications/comp/applChain.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport '../applications.css'\r\nimport Container from 'react-bootstrap/Container';\r\nimport ApplItem from \"./applItem\";\r\n\r\nconst ApplChain = () => {\r\n    const [newData, setNewData] = useState([]);\r\n\r\n    useEffect(() => {\r\n        handleSubmit();\r\n    }, []);\r\n\r\n    const fetchOfficeData = async () => {\r\n        const idd = localStorage.getItem('idd');\r\n        try {\r\n            const response = await fetch(`http://158.160.147.51:8181/api/office/${idd}`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': 'Bearer ' + localStorage.getItem('token')\r\n                },\r\n            });\r\n            if (!response.ok) {\r\n                throw new Error('Failed to fetch office data');\r\n            }\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.log(error.message);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const fetchRequestData = async () => {\r\n        try {\r\n            const idd = localStorage.getItem('idd');\r\n            const response = await fetch(`http://158.160.147.51:8181/api/office/${idd}`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': 'Bearer ' + localStorage.getItem('token')\r\n                },\r\n            });\r\n            if (!response.ok) {\r\n                throw new Error('Failed to fetch request data');\r\n            }\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.log(error.message);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        try {\r\n            const officeData = await fetchOfficeData();\r\n            const requestData = await fetchRequestData();\r\n\r\n            if (!officeData || !requestData) {\r\n                throw new Error('Failed to fetch required data');\r\n            }\r\n\r\n            const newData = requestData.requests.map(item => ({\r\n                status: item.status,\r\n                keyId: item.keyId,\r\n                requestedDateTime: item.requestedDateTime,\r\n                id: item.id,\r\n                backgroundColor: getStatusBackgroundColor(item.status)\r\n            }));\r\n\r\n            console.log('New data:', newData);\r\n            setNewData(newData);\r\n        } catch (error) {\r\n            console.log('Ошибка:', error);\r\n        }\r\n    };\r\n\r\n    const getStatusBackgroundColor = (status) => {\r\n        switch (status) {\r\n            case 'отклонено':\r\n                return '#DC5858';\r\n            case 'IN_PROCESS':\r\n                return '#EECF2A';\r\n            case 'одобрено':\r\n                return '#1EC360';\r\n            default:\r\n                return '#ffffff';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Container className=\"applChain\">\r\n            {newData.map((data, index) => (\r\n                <ApplItem key={index} background={data.backgroundColor} status={data.status} keyId={data.keyId} id={data.id} requestedDateTime={data.requestedDateTime} />\r\n            ))}\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default ApplChain;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}